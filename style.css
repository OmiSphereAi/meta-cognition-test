/* =========================================================================
   MCIF v5 — Lucid Flow UI (Industry-grade)
   style.css — polished, responsive, accessible
   Works with index.html and app.js / MCIF_5_MasterSchema.json
   ========================================================================= */

/* ---------- Root variables ---------- */
:root {
  --bg-a: #071021;
  --bg-b: #0f1630;
  --glass: rgba(255,255,255,0.03);
  --muted: rgba(255,255,255,0.72);
  --accent-a: #6ee7d6;
  --accent-b: #7a6bff;
  --card-glow: rgba(122,107,255,0.12);
  --surface: rgba(255,255,255,0.02);
  --success: #7ee7a6;
  --danger: #ff6b6b;
  --max-width: 1100px;
  --container-pad: 20px;
  --radius: 14px;
  --transition-fast: 180ms;
  --transition-med: 360ms;
}

/* ---------- Reset & base ---------- */
* { box-sizing: border-box; margin: 0; padding: 0; }
html,body { height: 100%; font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; -webkit-font-smoothing: antialiased; background: linear-gradient(160deg,var(--bg-a) 0%,var(--bg-b) 100%); color: #fff; }
a { color: inherit; text-decoration: none; }
small { font-size: 0.9rem; color: var(--muted); }

/* ---------- App shell ---------- */
.app-shell { min-height: 100vh; display:flex; flex-direction:column; }
.topbar { display:flex; align-items:center; justify-content:space-between; padding:18px var(--container-pad); border-bottom:1px solid rgba(255,255,255,0.03); backdrop-filter: blur(6px); }
.brand { display:flex; align-items:center; gap:12px; }
.logo { width:44px; height:44px; border-radius:10px; background: linear-gradient(135deg,var(--accent-a),var(--accent-b)); box-shadow: 0 8px 30px var(--card-glow); }
.title { font-weight:700; font-size:1rem; color:#e7fefd; }
.subtitle { font-size:12px; color:var(--muted); }

/* ---------- Top actions ---------- */
.top-actions { display:flex; gap:10px; align-items:center; }
.top-actions select { padding:8px 10px; border-radius:8px; background: rgba(255,255,255,0.02); color:#fff; border:1px solid rgba(255,255,255,0.04); }
.secondary-btn, .lucid-btn { cursor:pointer; border:0; border-radius:10px; padding:10px 14px; font-weight:700; transition: transform var(--transition-med) cubic-bezier(.2,.9,.2,1), box-shadow var(--transition-med); }
.secondary-btn { background: transparent; color:var(--muted); border:1px solid rgba(255,255,255,0.06); }
.lucid-btn { background: linear-gradient(90deg,var(--accent-a),var(--accent-b)); color:#022; box-shadow:0 8px 24px var(--card-glow); }

/* ---------- Main / container ---------- */
.main { flex:1; display:flex; justify-content:center; align-items:flex-start; padding:28px var(--container-pad); }
.container { width:100%; max-width:var(--max-width); }

/* ---------- Cards ---------- */
.card { background:var(--glass); border-radius:var(--radius); padding:22px; box-shadow:0 12px 48px rgba(0,0,0,0.45); backdrop-filter: blur(8px); margin-bottom:18px; }
.intro-hero { padding:36px; text-align:center; }
h1 { margin:0 0 12px; font-size:1.6rem; color: #e6fbf8; }
.lead { color:var(--muted); margin-bottom: 18px; }

/* ---------- Controls Row ---------- */
.controls-row { display:flex; gap:12px; justify-content:center; flex-wrap:wrap; margin-top:12px; }
.tier-select select { min-width:200px; }

/* ---------- Test section ---------- */
#test-section { display:block; }
.hidden { display:none !important; }
.phase-header { display:flex; justify-content:space-between; gap:12px; align-items:flex-start; }
.phase-title { margin:0; font-size:1.25rem; color:#e7feff; }
.phase-description { font-size:13px; color:var(--muted); margin-top:6px; }

/* ---------- Question box ---------- */
.question-container { margin-top:18px; min-height:220px; display:flex; flex-direction:column; gap:12px; }
.question-card { background:rgba(255,255,255,0.02); padding:14px; border-radius:10px; border:1px solid rgba(255,255,255,0.04); }
textarea, input[type="text"] { width:100%; border-radius:10px; padding:12px; background:rgba(255,255,255,0.02); color:#fff; border:1px solid rgba(255,255,255,0.06); resize:vertical; min-height:90px; }

/* ---------- Progress ---------- */
.progress-wrap { display:flex; align-items:center; gap:12px; }
.progress-track { flex:1; height:8px; background:rgba(255,255,255,0.05); border-radius:6px; overflow:hidden; }
.progress-fill { height:100%; width:0%; background:linear-gradient(90deg,var(--accent-b),var(--accent-a)); transition: width .5s ease; }

/* ---------- Nav Row ---------- */
.nav-row { display:flex; justify-content:flex-end; gap:12px; margin-top:14px; }
.nav-row .secondary-btn { background: rgba(0,0,0,0.2); color:var(--muted); border:1px solid rgba(255,255,255,0.04); }

/* ---------- Flow meter ---------- */
.flow-meter { height:6px; background:rgba(255,255,255,0.04); border-radius:4px; margin-top:12px; overflow:hidden; }
.flow-fill { height:100%; width:0%; background:linear-gradient(90deg,#ffd57a,#ff86b0); transition:width .6s ease; }

/* ---------- Results styles ---------- */
.results-body { color:var(--muted); font-size:14px; line-height:1.6; }
.result-actions { display:flex; gap:10px; justify-content:flex-end; margin-top:12px; }

/* ---------- Footer ---------- */
.footer { padding:14px var(--container-pad); border-top:1px solid rgba(255,255,255,0.03); text-align:center; color:var(--muted); font-size:13px; }

/* ---------- Small helpers ---------- */
.small { font-size:12px; color:var(--muted); }
.show { display:block !important; }
.hide { display:none !important; }

/* ---------- Animations ---------- */
.show { animation: fadeInSlide var(--transition-med) cubic-bezier(.2,.9,.2,1) forwards; }
.hide { animation: fadeOutSlide .28s ease forwards; }
@keyframes fadeInSlide { from { opacity:0; transform:translateY(8px);} to { opacity:1; transform:translateY(0);} }
@keyframes fadeOutSlide { from { opacity:1; transform:translateY(0);} to { opacity:0; transform:translateY(8px);} }

/* ---------- Accessibility focus ---------- */
button:focus, select:focus, textarea:focus { outline: 3px solid rgba(110,231,214,0.18); outline-offset: 2px; }

/* ---------- Responsive ---------- */
@media (max-width: 900px) {
  .phase-header { flex-direction:column; gap:8px; align-items:flex-start; }
  .topbar { flex-direction:column; gap:12px; align-items:flex-start; padding:14px; }
  .container { padding:8px; }
}

/* ---------- Visual polish ---------- */
.brand .title { letter-spacing: 0.2px; }
.lucid-btn { font-weight:800; padding:12px 18px; border-radius:12px; }
.secondary-btn { padding:10px 14px; }

/* ---------- Hidden dev overlay for debugging (toggle by removing display:none) ---------- */
.dev-debug { position: fixed; right: 14px; bottom: 14px; background: rgba(0,0,0,0.6); color:#fff; padding:10px; border-radius:8px; font-size:12px; display:none; z-index:9999; }
