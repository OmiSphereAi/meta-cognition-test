/* =============================================================
   MCIF v5 â€” Lucid Flow UI Stylesheet (Industry-grade)
   style.css
   - Responsive, accessible, and defensive styling
   - Designed to work with app.js & MCIF_5_MasterSchema.json
   ============================================================= */

/* ---------- Base / Reset ---------- */
:root{
  --bg-1: #08112A;
  --bg-2: #0f1726;
  --glass: rgba(255,255,255,0.04);
  --muted: rgba(255,255,255,0.62);
  --accent: #1de9b6;
  --accent-2: #0A78FF;
  --primary: linear-gradient(135deg,var(--accent),var(--accent-2));
  --card-bg: rgba(255,255,255,0.025);
  --glass-border: rgba(255,255,255,0.06);
  --success: #4cd964;
  --danger: #ff6b6b;
  --shadow: 0 8px 30px rgba(3,10,20,0.55);
  --radius-lg: 14px;
  --radius-md: 10px;
  --ease: cubic-bezier(.2,.9,.25,1);
  font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  color-scheme: dark;
}

*{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%}
body{background:radial-gradient(circle at 10% 10%, rgba(15,32,42,1) 0%, rgba(10,14,22,1) 60%), var(--bg-2); color:#e9f0ff; -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale; font-size:16px; line-height:1.45}

/* ---------- Layout ---------- */
.ui-shell{position:relative;min-height:100vh;display:flex;flex-direction:column}
.bg-layer{position:fixed;inset:0;z-index:-2;overflow:hidden}
.bg-gradient{position:absolute;inset:0;background:linear-gradient(180deg,rgba(8,17,42,0.95),rgba(15,23,38,0.95));filter:blur(28px) saturate(1.12)}
.bg-aurora{position:absolute;left:-20%;top:-10%;width:160%;height:160%;background:radial-gradient(circle at 10% 20%, rgba(29,233,182,0.06), transparent 10%), radial-gradient(circle at 90% 80%, rgba(10,120,255,0.06), transparent 20%);transform:translateZ(0);mix-blend-mode:screen}
.background-spiral{position:absolute;right:-10%;bottom:-10%;opacity:0.06;filter:blur(12px);transform:translateZ(0)}

.topbar{display:flex;justify-content:space-between;align-items:center;padding:18px 36px;border-bottom:1px solid var(--glass-border);backdrop-filter: blur(6px);position:relative;z-index:5}
.brand{display:flex;align-items:center;gap:14px}
.title .product{font-weight:600;font-size:1rem}
.title .subtitle{font-size:.82rem;color:var(--muted)}
.logo svg{filter:drop-shadow(0 4px 12px rgba(0,0,0,0.45))}

.top-actions{display:flex;gap:8px;align-items:center}
.compact-select{background:transparent;border:1px solid var(--glass-border);color:var(--muted);padding:8px 10px;border-radius:8px}
.icon-btn{background:transparent;border:1px solid var(--glass-border);padding:8px;border-radius:10px;color:var(--muted);cursor:pointer}
.icon-btn:hover{transform:translateY(-2px);box-shadow:var(--shadow)}

.main-grid{display:grid;grid-template-columns: 1.1fr 360px;gap:22px;padding:28px 36px;align-items:start}
@media (max-width:1100px){.main-grid{grid-template-columns:1fr;padding:20px}}

.card{background:var(--card-bg);border-radius:var(--radius-lg);padding:18px;border:1px solid var(--glass-border);box-shadow:0 6px 30px rgba(0,0,0,0.45);backdrop-filter: blur(6px)}
.card-inner{display:flex;flex-direction:column;gap:14px}

/* ---------- Intro Card ---------- */
.intro-card{max-width:960px;margin:0 auto;text-align:center;padding:28px}
.page-title{font-size:1.8rem;letter-spacing:0.6px}
.lead{color:var(--muted);max-width:820px;margin:0 auto 12px}
.tier-row{display:flex;gap:12px;justify-content:center;margin:14px 0}
.tier-card{cursor:pointer;border:1px solid rgba(255,255,255,0.02);padding:12px 16px;border-radius:12px;min-width:160px;transition:all .25s var(--ease);background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005))}
.tier-card:hover{transform:translateY(-6px);box-shadow:0 18px 40px rgba(3,10,20,0.45)}
.tier-card input{display:none}
.tier-card .tier-title{font-weight:700}
.tier-card .tier-sub{font-size:0.86rem;color:var(--muted);margin-top:6px}

/* controls */
.controls-row{display:flex;gap:12px;justify-content:center;align-items:center;margin-top:6px}
.frequency-control, .soundscape-control{display:flex;flex-direction:column;gap:6px}
.safety-note{color:rgba(255,255,255,0.6);font-size:.9rem}
.intro-actions{display:flex;gap:12px;justify-content:center;margin-top:8px}
.primary-btn{background:var(--primary);color:#021024;border:none;padding:12px 18px;border-radius:12px;font-weight:700;cursor:pointer;box-shadow:0 8px 28px rgba(10,120,255,0.06)}
.primary-btn:hover{transform:translateY(-3px)}
.secondary-btn{background:transparent;border:1px solid var(--glass-border);padding:10px 14px;border-radius:10px;color:var(--muted);cursor:pointer}
.tertiary-btn{background:transparent;color:var(--muted);border:none;padding:8px}

/* ---------- Test Card ---------- */
.test-card{min-height:420px;max-width:1000px;position:relative}
.top-row{display:flex;gap:18px;align-items:center;justify-content:space-between}
.progress-wrap{flex:1;max-width:520px}
.progress-label{font-size:.85rem;color:var(--muted);margin-bottom:6px}
.progress-track{background:rgba(255,255,255,0.03);height:18px;border-radius:999px;padding:2px}
.progress-bar{height:100%;border-radius:999px;background:linear-gradient(90deg,#1de9b6,#0A78FF);display:flex;align-items:center;justify-content:center;font-weight:700;color:#021024}
.resonance-wrap{width:320px;display:flex;flex-direction:column;gap:6px}
.resonance-track{background:rgba(255,255,255,0.02);height:12px;border-radius:10px;padding:2px}
.resonance-meter{height:100%;border-radius:999px;background:linear-gradient(90deg,#7b61ff,#1de9b6)}
.resonance-help{font-size:.78rem;color:var(--muted);margin-top:6px}

/* visualizer */
.visualizer-wrap{margin-top:12px;border-radius:10px;overflow:hidden;border:1px solid rgba(255,255,255,0.02);background:linear-gradient(180deg, rgba(0,0,0,0.15), transparent);padding:6px 8px}
#frequencyVisualizer{width:100%;height:120px;display:block;border-radius:8px;background:transparent}

/* question area */
.question-area{margin-top:14px;min-height:220px;display:flex;flex-direction:column;gap:12px}
.question-area h3{font-size:1.05rem}
.input-container{display:flex;flex-direction:column;gap:8px}
.input-container button{padding:10px 14px;border-radius:10px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:var(--muted);cursor:pointer}
.input-container button:hover{transform:translateY(-3px);box-shadow:var(--shadow)}
.input-container textarea{min-height:120px;background:transparent;border:1px solid rgba(255,255,255,0.03);padding:12px;border-radius:10px;color:#fff;resize:vertical}
.input-container input[type="range"]{width:100%}

/* reflection aside */
.reflection-card{max-width:320px;position:sticky;top:28px}
.reflection-card h3{font-size:1rem}
.reflection-content .muted{color:var(--muted)}

/* results */
.results-card{max-width:1020px;margin:0 auto}
.results-header{display:flex;justify-content:space-between;align-items:center}
.result-actions{display:flex;gap:8px}
.result-body{margin-top:12px;padding:8px;display:grid;grid-template-columns:1fr 360px;gap:14px}
@media (max-width:1100px){.result-body{grid-template-columns:1fr}}
.result-left{padding-right:8px}
.result-right{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:10px;padding:12px}

/* modal */
.modal{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:linear-gradient(rgba(2,4,8,0.6),rgba(2,4,8,0.8));z-index:60}
.modal-inner{background:linear-gradient(180deg,rgba(8,12,20,0.96),rgba(12,18,28,0.96));padding:20px;border-radius:12px;border:1px solid rgba(255,255,255,0.04);max-width:620px}
.modal-body p{color:var(--muted);margin-bottom:10px}
.modal-actions{display:flex;gap:8px;justify-content:flex-end;margin-top:12px}

/* small helpers */
.sr-only{position:absolute;left:-10000px;top:auto;width:1px;height:1px;overflow:hidden}
.muted{color:var(--muted)}
.phase-help{color:var(--muted);font-size:.9rem;margin-top:6px}

/* footer */
.footer{margin-top:auto;border-top:1px solid rgba(255,255,255,0.02);padding:12px 36px;display:flex;justify-content:space-between;align-items:center;color:var(--muted);font-size:.9rem}
.footer .version{opacity:0.8}

/* ---------- Responsive tweaks ---------- */
@media (max-width:900px){
  .topbar{padding:12px}
  .main-grid{padding:14px}
  .intro-card{padding:18px}
  .reflection-card{display:none}
  .progress-wrap{max-width:360px}
}

/* ---------- Animations & Micro-interactions ---------- */
@keyframes fadeIn{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:none}}
.primary-btn, .secondary-btn, .icon-btn{transition:transform .18s var(--ease), box-shadow .18s var(--ease)}
.primary-btn:active, .icon-btn:active{transform:translateY(1px);opacity:0.98}

/* ---------- Accessibility: text sizes ---------- */
body[data-text-size="large"]{font-size:18px}
body[data-text-size="xlarge"]{font-size:20px}

/* ---------- Developer utilities ---------- */
.debug-border *{outline:1px dashed rgba(255,255,255,0.03)}

/* ---------- Visual polish for lucidity ---------- */
/* subtle vignette & glass border */
.ui-shell::after{content:"";position:fixed;inset:0;pointer-events:none;background:linear-gradient(180deg,rgba(0,0,0,0.02),rgba(0,0,0,0.12));mix-blend-mode:multiply;z-index:-1}





